import{f as z,j as e,B as A,O as ye,R as I,r as n,s as je,t as ve,l as te,v as we,w as ke,k as ie,x as Ne,y as Ce,z as Se,i as Fe,A as re,C as Pe,D as Ee,E as Me,F as Ae}from"./main-C2EdB3bD.js";import{H as Ie}from"./heading-DLvnKbqR.js";import{C as _,a as R,b as H,c as q}from"./card-C_G6-K5V.js";import{T as De,a as Le,b as G,c as B}from"./tabs-Bn_WIqAL.js";import{l as Ue,m as Te,n as oe,o as Oe}from"./queries-UTFv23zn.js";import{L as ne}from"./label-9KBkO-sB.js";import{M as K,A as $e}from"./alert-modal-BolPylOc.js";import{I as de}from"./input-B45D5Olh.js";import{I as _e}from"./icons-CuZn6Hei.js";import{z as se,u as qe,t as Ge,F as Be,a as Re,b as He,c as Ve,d as Je,e as Ke}from"./index-C3WPWvzX.js";import{C as ze,M as Qe}from"./map-form-8Vc8hTLY.js";import{S as We}from"./share-vWLXwybe.js";import{C as Xe}from"./chevron-left-CojRQ9nB.js";import"./index-DA1tHQxZ.js";import"./index-Dqb9r6Ye.js";import"./index-BLaVzQw4.js";import"./index-DG7jtevX.js";import"./Combination-Y0AnHksN.js";import"./createLucideIcon-CjGDsaN2.js";import"./react-icons.esm-BJ08uJoe.js";import"./x-BuHdgi7S.js";const ce=({product:r,pointOfInterestId:c,onDelete:u,isAdd:l,onAdd:x})=>{const i=z(),w=f=>`${ye}/storage/upload/product/${f}`;return e.jsxs(_,{className:"h-full shadow-[rgba(50,50,93,0.25)_0px_6px_12px_-2px,_rgba(0,0,0,0.3)_0px_3px_7px_-3px] drop-shadow-sm",children:[e.jsx(R,{children:e.jsx(H,{children:e.jsxs("p",{className:"truncate text-xl",children:[" ",r.name," "]})})}),e.jsxs(q,{children:[e.jsx("img",{src:w(r.image),alt:r.name,className:"h-28 w-full object-cover"}),e.jsx(ne,{className:"line-clamp-3 text-lg",children:r.description}),e.jsx(A,{className:"mt-4 w-full bg-neutral-300 text-cyan-700 hover:text-white",onClick:()=>i.push(`/product/${r.id}/poi/${c}`),children:"Lihat Detail"}),l?e.jsx(A,{className:"mt-2 w-full",onClick:()=>{x&&x(r.id)},children:"Tambahkan"}):e.jsx(A,{className:"mt-2 w-full bg-red-500",onClick:()=>u(r.id),children:"Hapus"})]})]})},V=({isSubmitting:r,text:c,onPlusClick:u})=>e.jsxs("div",{className:`flex h-full flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 text-center transition-opacity ${r?"opacity-50":""}`,children:[e.jsx("button",{onClick:u,disabled:r,className:"mb-2 h-12 w-12 rounded-full border-none bg-primary text-2xl text-white transition-colors hover:bg-primary/90 disabled:opacity-50",children:r?e.jsx("div",{className:"mx-auto h-6 w-6 animate-spin rounded-full border-2 border-white border-t-transparent"}):"+"}),e.jsx("span",{className:"text-gray-600",children:c})]}),Ye=({pointOfInterestId:r,ids:c,onAdd:u})=>{const[l,x]=I.useState(!1),[i,w]=I.useState({query:{page:1,take:10,keyword:""}}),[f,b]=I.useState([]),[o,m]=I.useState(""),{data:y,refetch:F}=Ue(i);n.useEffect(()=>{if(y){const C=y.data.filter(E=>c.indexOf(E.id)===-1);b(C)}},[y,c]);const p=()=>{w({query:{...i.query,keyword:o}}),F()},P=async j=>{u(j),x(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{isSubmitting:!1,text:"Tambahkan Related Product Baru",onPlusClick:()=>x(!0)}),e.jsxs(K,{title:"Tambah Produk",isOpen:l,onClose:()=>{x(!1)},className:"max-w-screen-lg",children:[e.jsxs("div",{className:"flex w-full max-w-sm items-center space-x-2",children:[e.jsx(de,{type:"text",placeholder:"Cari",onChange:j=>m(j.target.value)}),e.jsx(A,{type:"submit",onClick:p,children:"Search"})]}),e.jsx("div",{className:"grid max-h-[80vh] grid-cols-1 gap-4 overflow-y-auto py-4 md:grid-cols-2 lg:grid-cols-3",children:f.map(j=>e.jsx("div",{className:"h-30",children:e.jsx(ce,{product:j,onDelete:()=>{},isAdd:!0,onAdd:C=>P(C),pointOfInterestId:r})},j.id))})]})]})},Q=({hint:r,onSearchClick:c})=>{const[u,l]=n.useState("");return e.jsxs("div",{className:"mb-5 flex items-center space-x-1",children:[e.jsxs("div",{className:"relative flex w-[40%] max-w-md items-center",children:[e.jsx(_e.search,{className:"absolute left-3 text-gray-500"}),e.jsx("input",{type:"text",value:u,onChange:x=>l(x.target.value),placeholder:r,className:"w-full rounded-md border border-gray-200 bg-gray-100 px-4 py-2 pl-10 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsx("button",{className:"hover:bg-primary-dark rounded-md bg-primary px-6 py-2 text-white focus:outline-none",onClick:()=>c(u),children:"Cari"})]})};function Ze({pointOfInterestId:r}){const[c,u]=n.useState([]),{data:l,isLoading:x,refetch:i}=Te({path:{pointOfInterestId:r}});n.useEffect(()=>{u(l||[])},[l]);const w=async o=>{try{await je({path:{productId:o,pointOfInterestId:r}}),i()}catch(m){console.error(m)}},f=async o=>{console.log(o);try{await ve({body:{productId:o,pointOfInterestId:r}})}catch(m){console.error(m)}i()};if(x)return e.jsx("h1",{children:"Loading...."});const b=o=>{u((l==null?void 0:l.filter(m=>m.name.toLowerCase().includes(o.toLowerCase())))||[])};return e.jsxs("div",{children:[e.jsx(Q,{hint:"Cari produk",onSearchClick:b}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 2xl:grid-cols-3",children:[e.jsx("div",{className:"h-96",children:e.jsx(Ye,{onAdd:f,pointOfInterestId:r,ids:(l==null?void 0:l.map(o=>o.id))||[]})}),c==null?void 0:c.map(o=>e.jsx("div",{className:"h-96",children:e.jsx(ce,{product:o,onDelete:w,pointOfInterestId:r})},o.id))]})]})}const ea=({file:r,baseUrl:c,onDelete:u,onSetFeatured:l,onSetGallery:x,isFeatured:i,isGallery:w})=>{const f=S=>S.split("/").pop()||"Unknown",[b,o]=n.useState(i),[m,y]=n.useState(w),[F,p]=n.useState(!1),[P,j]=n.useState(!1),[C,E]=n.useState(null);n.useState([]),n.useEffect(()=>{o(i),y(w)},[i,w]);const M=async()=>{try{await l(r.id),o(!0)}catch(S){console.error("Failed to set featured:",S)}},D=async()=>{try{await x(r.id),y(!0)}catch(S){console.error("Failed to set gallery:",S)}},L=S=>{E(S),p(!0)},T=async()=>{C!==null&&(j(!0),await u(C),p(!1),j(!1),E(null))};return e.jsxs("div",{className:"group overflow-hidden rounded-lg border border-gray-100 pb-3 text-center shadow-md transition-shadow hover:shadow-lg",children:[e.jsx("div",{className:"p-3",children:e.jsx("img",{src:`${c}${r.url}`,alt:f(r.url),className:"h-36 w-full rounded-lg object-cover"})}),e.jsx("div",{className:"p-2 text-sm text-gray-600",children:f(r.url)}),e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:M,disabled:b,className:`w-full rounded-md px-4 py-1 text-sm ${b?"bg-primary text-white":"bg-gray-200 hover:bg-gray-300"}`,children:b?"Foto Sampul":"Jadikan Foto Sampul"}),e.jsx("button",{onClick:D,disabled:m,className:`mt-2 w-full rounded-md px-4 py-1 text-sm ${m?"bg-primary text-white":"bg-gray-200 hover:bg-gray-300"}`,children:m?"Foto Galeri":"Jadikan Foto Galeri"}),e.jsx("button",{onClick:()=>L(r.id),className:"mt-2 w-full rounded-md bg-red-500 px-4 py-1 text-sm text-white hover:bg-red-600",children:"Hapus"})]}),e.jsx($e,{isOpen:F,onClose:()=>p(!1),onConfirm:T,loading:P,title:"Apakah anda yakin?",description:"Anda tidak akan dapat memulihkan file media ini",cancelTitle:"Batal",continueTitle:"Hapus"})]})},ue=(r,c,u)=>{const l=async o=>{try{await te({path:{mediaId:o}}),r()}catch(m){throw console.error("Failed to delete media:",m),m}},x=async(o,m)=>{try{await we({path:{mediaId:o},body:{isFeatured:m}}),r()}catch(y){throw console.error("Failed to update media featured flag:",y),y}},i=async(o,m)=>{try{await ke({path:{mediaId:o},body:{isGallery:m}}),r()}catch(y){throw console.error("Failed to update media gallery flag:",y),y}};return{deleteMedia:l,setFeatured:async o=>{await x(o,!0)},setGallery:async o=>{await i(o,!0)},deleteAllMedia:async()=>{u(!0);try{const o=c.map(m=>te({path:{mediaId:m.id}}));await Promise.all(o),r()}catch(o){console.error("Failed to delete media:",o)}finally{u(!1)}}}},aa=({pointOfInterestId:r,onFileChange:c,filteredMedia:u,setFilteredMedia:l,localMedia:x,setLocalMedia:i})=>{const[w,f]=n.useState(!1),{data:b,refetch:o}=r!==0?oe({path:{id:r},query:{refetchInterval:3e3,refetchOnWindowFocus:!0}}):{data:{media:[]},refetch:()=>{}},[m,y]=n.useState([]),[F,p]=n.useState(!1),{deleteMedia:P,setFeatured:j,setGallery:C}=ue(o,m,p),E=r!==0?(b==null?void 0:b.media)||[]:x;n.useEffect(()=>{l(E)},[E,l]);const M=h=>{l(E.filter(v=>v.url.toLowerCase().includes(h.toLowerCase())))},D=async h=>{await j(h),i(v=>v.map(g=>g.id===h?{...g,isFeatured:!0}:g)),l(v=>v.map(g=>g.id===h?{...g,isFeatured:!0}:g))},L=async h=>{await C(h),i(v=>v.map(g=>g.id===h?{...g,isGallery:!0}:g)),l(v=>v.map(g=>g.id===h?{...g,isGallery:!0}:g))},T=async h=>{try{p(!0),await P(h),i(v=>v.filter(g=>g.id!==h)),l(v=>v.filter(g=>g.id!==h))}catch(v){console.error("Failed to delete media:",v)}finally{p(!1)}},S=h=>{const{isFeatured:v,isGallery:g}=h;return e.jsx(ea,{file:h,baseUrl:ie,onDelete:T,onSetFeatured:D,onSetGallery:L,isFeatured:v,isGallery:g},`media-${h.id}`)};return e.jsxs("div",{children:[e.jsx(Q,{hint:"Cari media",onSearchClick:M}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 2xl:grid-cols-3",children:[e.jsx("div",{className:"h-80",children:e.jsx(V,{isSubmitting:w,text:w?"Mengupload...":"Tambahkan Foto Baru",onPlusClick:()=>{var h;return(h=document.getElementById("file-input"))==null?void 0:h.click()}})}),u.map(h=>S(h))]}),e.jsx("input",{id:"file-input",type:"file",className:"hidden",onChange:c,accept:"image/*"})]})},ta=se.object({name:se.string().min(2,{message:"Username must be at least 2 characters."})}),ra=({pointOfInterestId:r,onAdd:c})=>{const[u,l]=I.useState(!1),[x,i]=I.useState(!1),[w,f]=I.useState(!1),b=qe({resolver:Ge(ta),defaultValues:{name:""}}),{formState:{errors:o,isSubmitting:m}}=b;console.log("formState",o);const y=async p=>{console.log("onSubmit",p),l(!1),i(!0)},F=async p=>{var j,C;const P=(j=p.target.files)==null?void 0:j[0];if(P){f(!0);try{const E=await Ne({body:{file:P}}),M={title:b.getValues().name,pointOfInterestId:r,fileId:((C=E.data)==null?void 0:C.id)||0};await Ce({body:M})}finally{f(!1),i(!1),c()}}};return e.jsxs(e.Fragment,{children:[e.jsx(V,{isSubmitting:!1,text:"Tambah Gambar 360",onPlusClick:()=>l(!0)}),e.jsx(K,{title:"Buat atraksi 360 baru",description:"Untuk membuat tour, masukkan nama lalu pilih berikutnya",isOpen:u,onClose:()=>{l(!1)},children:e.jsx(Be,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(y),className:"space-y-8",children:[e.jsx(Re,{control:b.control,name:"name",render:({field:p})=>e.jsxs(He,{children:[e.jsx(Ve,{children:"Nama atraksi"}),e.jsx(Je,{children:e.jsx(de,{placeholder:"Masukkan nama atraksi",...p})}),e.jsx(Ke,{})]})}),e.jsx(A,{disabled:m,type:"submit",children:"Berikutnya"})]})})}),e.jsx(K,{title:"Tambahkan panorama baru",description:"Pilih media dengan format .jpg, .png, .tiff, .mp4, atau .mov. Maksimal durasi adalah 60 detik",isOpen:x,onClose:()=>{i(!1)},children:e.jsxs("div",{className:"h-56",children:[e.jsx(V,{isSubmitting:w,text:"Upload Media",onPlusClick:()=>{var p;return(p=document.getElementById("file-input"))==null?void 0:p.click()}}),e.jsx("input",{id:"file-input",type:"file",className:"hidden",onChange:F,accept:"image/*"})]})})]})},sa=({panorama:r,pointOfInterestId:c})=>{const u=z();return e.jsx(_,{className:"h-full shadow-[rgba(50,50,93,0.25)_0px_6px_12px_-2px,_rgba(0,0,0,0.3)_0px_3px_7px_-3px] drop-shadow-sm",children:e.jsxs(q,{className:"p-2",onClick:()=>u.push(`/panorama-editor/${r.id}/poi/${c}`),children:[e.jsx("img",{src:ie+r.file.url,alt:r.title,className:"h-28 w-full rounded-md object-cover"}),e.jsx(ne,{className:"mt-2 line-clamp-3",children:r.title})]})})},la=({pointOfInterestId:r})=>{const[c,u]=n.useState([]),{data:l,isLoading:x,refetch:i}=Oe({path:{id:r}});n.useEffect(()=>{u(l||[])},[l]);const w=f=>{u((l==null?void 0:l.filter(b=>b.title.toLowerCase().includes(f.toLowerCase())))||[])};return x?e.jsx("h1",{children:"Loading...."}):e.jsxs("div",{children:[e.jsx(Q,{hint:"Cari panorama",onSearchClick:w}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 2xl:grid-cols-3",children:[e.jsx("div",{className:"h-44",children:e.jsx(ra,{pointOfInterestId:r,onAdd:()=>i()})}),c==null?void 0:c.map(f=>e.jsx("div",{className:"h-44",children:e.jsx(sa,{panorama:f,pointOfInterestId:r})},f.id))]})]})},ia=r=>({uploadFile:async u=>{if(!u)throw new Error("No file selected for upload");try{const x=(await Se({body:{file:u}})).data;if(x&&x.id&&x.url)return r(),x;throw new Error("Uploaded file response is invalid")}catch(l){throw console.error("Failed to upload file:",l),l}}}),le={title:"",overview:"",about:"",category:"",location:"",destination:"",area:"",isMainPoi:"",latitude:"",longitude:"",altitude:"",tags:"",media:[]};function Pa(){var Z,ee,ae;const{poiId:r}=Fe(),c=z(),u=r==="0",{data:l,refetch:x}=oe({path:{id:Number(r)||0}}),[i,w]=n.useState(le),[f,b]=n.useState([]),[o,m]=n.useState([]),[y,F]=n.useState([]),[p,P]=n.useState(!1),[j,C]=n.useState(!1),[E,M]=n.useState(!1),{uploadFile:D}=ia(x),[L,T]=n.useState([]),[S,h]=n.useState(""),[v,g]=n.useState(""),[J,W]=n.useState(null),{deleteAllMedia:me}=ue(()=>{},y,M),[t,N]=n.useState({title:"",overview:"",about:"",category:"",location:"",destination:{name:"",id:null},area:{name:"",id:null},isMainPoi:!1,latitude:"",longitude:"",altitude:"",tags:[],mediaId:[]});n.useEffect(()=>{l&&N(l)},[l]),n.useEffect(()=>{l!=null&&l.media&&m(l.media)},[l]);const xe=()=>{const a={...le};let s=!0;return t.title||(a.title="Title is required.",s=!1),t.overview||(a.overview="About is required.",s=!1),t.about||(a.about="Description is required.",s=!1),t.category||(a.category="Category is required.",s=!1),t.location||(a.location="Location is required.",s=!1),J===null&&(a.destination="Destination is required.",s=!1),(!t.area||t.area.id===null)&&(a.area="Area is required.",s=!1),t.latitude||(a.latitude="Latitude is required.",s=!1),t.longitude||(a.longitude="Longitude is required.",s=!1),t.altitude||(a.altitude="Altitude is required.",s=!1),t.tags.length||(a.tags="At least one tag is required.",s=!1),w(a),s},he=n.useCallback(async a=>{var d;const s=(d=a.target.files)==null?void 0:d[0];if(s)try{const k=await D(s);if(!k||!k.id)throw new Error("File upload failed.");if(M(!0),r&&r!=="0"){const O=[...y.map($=>$.id.toString()),k.id.toString()];await re({path:{id:r},body:{mediaId:O}}),m($=>[...$,k]),F($=>[...$,k])}else m(O=>[...O,k]),F(O=>[...O,k]),P(!0)}catch(k){console.error("Error uploading file:",k)}finally{M(!1),a.target.value=""}},[r,y,D,F,m]),pe=async a=>{if(!xe())return;const s={...a,status:"draft",destinationId:t.destination.id,areaId:t.area.id,mediaId:y.map(d=>d.id.toString())};try{M(!0),u?(await Ee({body:s}),C(!0),P(!0)):await re({path:{id:String(r)},body:{...s}}),x(),c.push("/pois")}catch(d){console.error("Error saving draft:",d)}M(!1)},ge=async()=>{p&&!j&&await me()};n.useEffect(()=>{const a=s=>{p&&!j&&(s.preventDefault(),s.returnValue="")};return window.addEventListener("beforeunload",a),()=>{window.removeEventListener("beforeunload",a)}},[p,j]),n.useEffect(()=>{const a=()=>{p&&!j&&ge()};return window.addEventListener("unload",a),()=>{window.removeEventListener("unload",a)}},[p,j]);const be=async()=>{!r||u||(await Me({path:{id:Number(r)}}),x(),c.push("/pois"))};n.useEffect(()=>{async function a(){var s;try{const d=await Ae({});(s=d==null?void 0:d.data)!=null&&s.data&&Array.isArray(d.data.data)?b(d.data.data):console.error("Unexpected data format for destinations:",d)}catch(d){console.error("Error fetching destinations:",d)}}a()},[]),n.useEffect(()=>{if(l){const{destination:a,area:s,...d}=l;W(typeof(a==null?void 0:a.id)=="number"?a.id:null),N({...d,destination:a||{name:"",id:null},area:s||{name:"",id:null}}),a!=null&&a.id&&X(a.id)}},[l]);const X=async a=>{var s;try{const d=await Pe({path:{id:a}});(s=d==null?void 0:d.data)!=null&&s.data&&Array.isArray(d.data.data)?T(d.data.data):console.error("Unexpected data format for areas:",d)}catch(d){console.error("Error fetching areas:",d)}},fe=(a,s)=>{(a!==S||s!==v)&&(h(a),g(s),N({...t,latitude:a,longitude:s}))},U="text-white px-2 py-1 rounded-lg capitalize",Y={draft:`bg-gray-500 ${U}`,published:`bg-green-500 ${U}`,unknown:`bg-red-500 ${U}`};return e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ie,{title:"Point of Interest"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs(A,{children:[e.jsx(We,{className:"h-4 w-4"}),"Share"]}),e.jsxs(A,{onClick:()=>c.back(),children:[e.jsx(Xe,{className:"h-4 w-4"}),"Back"]})]})]}),e.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-1 lg:grid-cols-3",children:[e.jsxs(_,{className:"col-span-2",children:[e.jsx(R,{children:e.jsx(H,{children:"Detail Marker"})}),e.jsx(q,{children:e.jsxs(De,{defaultValue:"basic",className:"space-y-4",children:[e.jsx(Le,{className:"rounded-none border-b bg-white px-0",children:e.jsxs("div",{className:"flex",children:[e.jsx(G,{value:"basic",className:"rounded-none border-b-2 border-transparent px-4 py-2 text-sm font-medium text-gray-500 hover:border-primary hover:text-primary focus:border-primary data-[state=active]:border-primary data-[state=active]:text-primary dark:bg-gray-800 dark:text-gray-400 dark:hover:text-primary dark:data-[state=active]:text-primary",children:"Informasi Dasar"}),e.jsx(G,{value:"product",className:"rounded-none border-b-2 border-transparent px-4 py-2 text-sm font-medium text-gray-500 hover:border-primary hover:text-primary focus:border-primary data-[state=active]:border-primary data-[state=active]:text-primary dark:bg-gray-800 dark:text-gray-400 dark:hover:text-primary dark:data-[state=active]:text-primary",children:"Related Product"}),e.jsx(G,{value:"images",className:"rounded-none border-b-2 border-transparent px-4 py-2 text-sm font-medium text-gray-500 hover:border-primary hover:text-primary focus:border-primary data-[state=active]:border-primary data-[state=active]:text-primary dark:bg-gray-800 dark:text-gray-400 dark:hover:text-primary dark:data-[state=active]:text-primary",children:"Images"}),e.jsx(G,{value:"360",className:"rounded-none border-b-2 border-transparent px-4 py-2 text-sm font-medium text-gray-500 hover:border-primary hover:text-primary focus:border-primary data-[state=active]:border-primary data-[state=active]:text-primary dark:bg-gray-800 dark:text-gray-400 dark:hover:text-primary dark:data-[state=active]:text-primary",children:"360"})]})}),e.jsx(B,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Judul"}),e.jsx("input",{type:"text",value:(t==null?void 0:t.title)||"",className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter title",onChange:a=>N({...t,title:a.target.value})}),i.title&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Sub Judul"}),e.jsx("input",{type:"text",value:(t==null?void 0:t.overview)||"",className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter overview",onChange:a=>N({...t,overview:a.target.value})}),i.overview&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.overview})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Deskripsi"}),e.jsx("textarea",{value:(t==null?void 0:t.about)||"",className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter detailed description",rows:4,onChange:a=>N({...t,about:a.target.value})}),i.about&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.about})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Kategori"}),e.jsxs("select",{value:(t==null?void 0:t.category)||"",className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",onChange:a=>N({...t,category:a.target.value}),children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih Kategori"}),e.jsx("option",{value:"Attraction",children:"Attraction"}),e.jsx("option",{value:"Hotel",children:"Hotel"}),e.jsx("option",{value:"Restaurant",children:"Restaurant"})]}),i.category&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Lokasi"}),e.jsx("input",{type:"text",value:(t==null?void 0:t.location)||"",className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter location",onChange:a=>N({...t,location:a.target.value})}),i.location&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.location})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Hash Tags"}),e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:t.tags.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-primary px-3 py-1 text-sm text-white",children:[e.jsx("span",{children:a}),e.jsx(ze,{className:"h-4 w-4 cursor-pointer text-white",onClick:()=>{N(d=>({...d,tags:d.tags.filter(k=>k!==a)}))}})]},s))}),e.jsx("input",{type:"text",className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter tags, separate with spaces",onKeyDown:a=>{if(a.key==="Enter"||a.key===","){a.preventDefault();const s=a.currentTarget.value.trim();s&&(N({...t,tags:[...t.tags,s]}),a.currentTarget.value="")}}}),i.tags&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.tags})]})]})}),e.jsx(B,{value:"product",className:"space-y-4",children:e.jsx(Ze,{pointOfInterestId:Number(r)})}),e.jsx(B,{value:"images",className:"space-y-4",children:e.jsx(aa,{pointOfInterestId:Number(r),filteredMedia:y,setFilteredMedia:F,localMedia:o,setLocalMedia:m,onFileChange:he})}),e.jsx(B,{value:"360",className:"space-y-4",children:e.jsx(la,{pointOfInterestId:Number(r)})})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(H,{children:"Status POI"})}),e.jsx(q,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("label",{className:"font-bold",children:"Status"})}),e.jsx("p",{className:t!=null&&t.status&&Y[t.status]?Y[t.status]:U,children:t==null?void 0:t.status})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("label",{className:"font-bold",children:"Author POI"})}),e.jsx("p",{className:(Z=t==null?void 0:t.author)!=null&&Z.username?`bg-gray-500 ${U}`:`bg-gray-500 ${U}`,children:((ee=t==null?void 0:t.author)==null?void 0:ee.username)??"Unknown"})]}),e.jsxs("div",{className:"flex justify-end gap-5",children:[e.jsx("button",{onClick:()=>pe(t),className:"underline hover:text-primary",children:"Simpan draft"}),e.jsx(A,{onClick:be,children:"Publish"})]})]})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(H,{children:"Informasi Peta"})}),e.jsx(q,{children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("div",{className:"h-auto",children:e.jsx(Qe,{onLocationChange:fe,latitude:S,longitude:v})}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Destinasi"}),e.jsxs("select",{className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",value:J||"",onChange:a=>{const s=Number(a.target.value);W(s);const d=f.find(k=>k.id===s);N(k=>({...k,destination:d||{name:"",id:null},area:null})),X(s)},children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih Destinasi"}),f.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),i.destination&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.destination})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Area"}),e.jsxs("select",{className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",value:((ae=t==null?void 0:t.area)==null?void 0:ae.id)||"",onChange:a=>{const s=Number(a.target.value),d=L.find(k=>k.id===s);N({...t,area:d||{name:"",id:null}})},disabled:!J,children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih Area"}),L.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),i.area&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.area})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Jenis POI"}),e.jsxs("select",{value:(t==null?void 0:t.isMainPoi)??!1,className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",onChange:a=>N({...t,isMainPoi:a.target.value==="true"}),children:[e.jsx("option",{value:"true",children:"Main POI"}),e.jsx("option",{value:"false",children:"Not Main POI"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Latitude"}),e.jsx("input",{type:"text",value:t==null?void 0:t.latitude,className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter latitude (e.g., 112.953012)",onChange:a=>{const s=a.target.value;/^[-\d.\d,\d\s]*$/.test(s)&&(N({...t,latitude:s}),h(s))}}),i.latitude&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.latitude})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Longitude"}),e.jsx("input",{type:"text",value:t==null?void 0:t.longitude,className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter longitude (e.g., -7.942493)",onChange:a=>{const s=a.target.value;/^[-\d.\d,\d\s]*$/.test(s)&&(N({...t,longitude:s}),g(s))}}),i.longitude&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.longitude})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold",children:"Altitude"}),e.jsx("input",{type:"text",value:t==null?void 0:t.altitude,className:"w-full rounded border border-gray-300 bg-white p-2 text-black text-black dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter altitude (e.g., 1221)",onChange:a=>{const s=a.target.value;/^[-\d.]*$/.test(s)&&N({...t,altitude:s})}}),i.altitude&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.altitude})]})]})})]})]})]})]})}export{Pa as default};
