import{r as d,f as h,j as e,B as p,l as x,p as f,h as g}from"./main-C2EdB3bD.js";import{P as j}from"./page-head-DrYHj-jU.js";import{S as b,T as C,D as S,a as T}from"./data-table-skeleton-Dcn48vSp.js";import{A as N}from"./alert-modal-BolPylOc.js";import{T as y}from"./Combination-Y0AnHksN.js";import{I as P}from"./icons-CuZn6Hei.js";import{B as k}from"./breadcrumbs-2JpL_OQU.js";import{k as I}from"./queries-UTFv23zn.js";import"./createLucideIcon-CjGDsaN2.js";import"./scroll-area-yFJ859s5.js";import"./index-BLaVzQw4.js";import"./index-DA1tHQxZ.js";import"./react-icons.esm-BJ08uJoe.js";import"./index-W54jnlhy.js";import"./chevron-left-CojRQ9nB.js";import"./input-B45D5Olh.js";import"./index-DG7jtevX.js";import"./x-BuHdgi7S.js";const A=({data:s})=>{const[t,n]=d.useState(!1),[o,a]=d.useState(!1),l=h(),c=s.media.map(i=>i.id),r=s.id,m=async()=>{try{n(!0),c.length>0&&await Promise.all(c.map(i=>x({path:{mediaId:i}}))),await f({path:{id:r.toString()}}),l.reload()}catch(i){console.error("Terjadi kesalahan saat menghapus POI dan media:",i)}finally{n(!1),a(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{isOpen:o,onClose:()=>a(!1),onConfirm:m,loading:t,title:"Apakah anda yakin?",description:"Anda tidak akan dapat memulihkan poi ini",cancelTitle:"Batal",continueTitle:"Hapus"}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx(p,{variant:"ghost",className:"flex h-8 w-auto items-start",onClick:()=>l.push(`/pois/${s.id}`),children:e.jsx(b,{className:"h-5 w-5"})}),e.jsx(p,{variant:"ghost",className:"flex h-8 w-auto items-start",onClick:()=>a(!0),children:e.jsx(y,{className:"h-5 w-5"})})]})]})},u="text-white px-2 py-1 rounded-lg capitalize",O={draft:`bg-gray-500 ${u}`,published:`bg-green-500 ${u}`},v=[{id:"number",header:"No",cell:({row:s,table:t})=>{const n=t.getState().pagination.pageIndex,o=t.getState().pagination.pageSize;return n*o+s.index+1},enableSorting:!1,enableHiding:!1},{accessorKey:"title",header:"TITLE"},{accessorKey:"category",header:"CATEGORY"},{accessorKey:"status",header:"STATUS",cell:({row:s})=>{const t=s.getValue("status");return e.jsx("span",{className:O[t],children:t})}},{header:"ACTIONS",id:"actions",cell:({row:s})=>e.jsx(A,{data:s.original})}];function w(){const s=h();return e.jsxs("div",{className:"flex items-center justify-between gap-2 py-5",children:[e.jsx("div",{className:"flex flex-1 gap-4",children:e.jsx(C,{placeholder:"Cari Point Of Interest"})}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(p,{className:"text-xs md:text-sm",onClick:()=>s.push("/pois/0"),children:[e.jsx(P.add,{className:"mr-2 h-4 w-4"})," Tambah"]})})]})}function B({pois:s,pageCount:t}){return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),s&&e.jsx(S,{columns:v,data:s,pageCount:t})]})}function X(){const[s]=g(),t=Number(s.get("page")||1),n=Number(s.get("limit")||10),o={query:{page:t,take:n}},{data:a,isLoading:l}=I(o),c=a==null?void 0:a.data,r=a==null?void 0:a.meta,m=(r==null?void 0:r.itemCount)||0,i=Math.ceil(m/n);return l?e.jsx("div",{className:"p-5",children:e.jsx(T,{columnCount:10,filterableColumnCount:2,searchableColumnCount:1})}):e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx(j,{title:"Poin Of Interest Management | App"}),e.jsx(k,{items:[{title:"Dashboard",link:"/"},{title:"POIs",link:"/pois"}]}),e.jsx(B,{pois:c,pageCount:i})]})}export{X as default};
