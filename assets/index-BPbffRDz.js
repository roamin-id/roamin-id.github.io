import{r as h,f as j,j as e,B as g,h as N}from"./main-C2EdB3bD.js";import{P as C}from"./page-head-DrYHj-jU.js";import{S as y,T as D,D as S,a as T}from"./data-table-skeleton-Dcn48vSp.js";import{A as k}from"./alert-modal-BolPylOc.js";import{u as w,a as v,b as I,c as P,d as $}from"./queries-UTFv23zn.js";import{T as E,P as F}from"./Combination-Y0AnHksN.js";import{B}from"./breadcrumbs-2JpL_OQU.js";import"./createLucideIcon-CjGDsaN2.js";import"./scroll-area-yFJ859s5.js";import"./index-BLaVzQw4.js";import"./index-DA1tHQxZ.js";import"./react-icons.esm-BJ08uJoe.js";import"./index-W54jnlhy.js";import"./chevron-left-CojRQ9nB.js";import"./input-B45D5Olh.js";import"./index-DG7jtevX.js";const K=({data:t,refetch:s})=>{const{mutateAsync:a}=w(),{mutateAsync:r}=v(),{mutateAsync:n}=I(),[d]=h.useState(!1),[m,l]=h.useState(!1),[i,u]=h.useState([]),c=j(),{data:f,isLoading:U}=P({path:{id:t.id}}),b=()=>{f&&u(f.data),l(!0)},A=async()=>{try{if(i&&i.length>0)for(const p of i)await r({path:{id:p.id}});const o=t.files;if(o.length>0)for(const p of o)await n({path:{fileId:p.id}});await a({path:{id:t.id}}).then(()=>s()),l(!1),c.push("/destination")}catch(o){console.error("Error during deletion:",o)}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{isOpen:m,onClose:()=>l(!1),onConfirm:A,loading:d,title:"Apakah Anda Yakin?",description:`Ini akan menghapus data Area yang terhubung dengan ${t.name}. Apakah anda Yakin? ${i&&i.length>0?`WARNING!! Terdapat area ${i.map(o=>o.name).join(", ")}`:""}`}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx(g,{variant:"ghost",className:"flex h-8 w-auto items-start",onClick:()=>c.push(`/destination/${t.id}`),children:e.jsx(y,{className:"h-5 w-5"})}),e.jsx(g,{variant:"ghost",className:"flex h-8 w-auto items-start",onClick:b,children:e.jsx(E,{className:"h-5 w-5"})})]})]})},x="text-white px-2 py-1 rounded-lg capitalize",L={draft:`bg-gray-500 ${x}`,published:`bg-green-500 ${x}`},M=t=>[{id:"number",header:"No",cell:({row:s,table:a})=>{const r=a.getState().pagination.pageIndex,n=a.getState().pagination.pageSize;return r*n+s.index+1},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:"NAME"},{accessorKey:"latitude",header:"LATITUDE"},{accessorKey:"longitude",header:"LONGITUDE"},{accessorKey:"status",header:"STATUS",cell:({row:s})=>{const a=s.getValue("status");return e.jsx("span",{className:L[a],children:a})}},{header:"ACTIONS",id:"actions",cell:({row:s})=>e.jsx(K,{refetch:t,data:s.original})}];function O(){const t=j();return e.jsxs("div",{className:"flex items-center justify-between gap-2 py-5",children:[e.jsx("div",{className:"flex flex-1 gap-4",children:e.jsx(D,{placeholder:"Cari destinasi"})}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(g,{className:"text-xs md:text-sm",onClick:()=>t.push("/destination/0"),children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Tambah"]})})]})}function R({destinations:t,pageCount:s,refetch:a}){return e.jsxs(e.Fragment,{children:[e.jsx(O,{}),t&&e.jsx(S,{columns:M(a),data:t,pageCount:s})]})}function ne(){const[t]=N(),s=Number(t.get("page")||1),a=Number(t.get("limit")||10),r={query:{page:s,take:a}},{data:n,isLoading:d,refetch:m}=$(r),l=n==null?void 0:n.data,i=n==null?void 0:n.meta,u=(i==null?void 0:i.itemCount)||0,c=Math.ceil(u/a);return d?e.jsx("div",{className:"p-5",children:e.jsx(T,{columnCount:10,filterableColumnCount:2,searchableColumnCount:1})}):e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx(C,{title:"Destination Management | App"}),e.jsx(B,{items:[{title:"Dashboard",link:"/"},{title:"Destinations",link:"/destination"}]}),e.jsx(R,{refetch:()=>m(),destinations:l,pageCount:c})]})}export{ne as default};
