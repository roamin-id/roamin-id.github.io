import{r as t,_ as g,j as T,c as h,$ as Q}from"./main-DlaEAmT8.js";import{$ as P,f as M,h as D,e as W,g as X,b as Z,c as v,a as ee}from"./index-DRf4hiWq.js";import{$ as I}from"./index-DG6Quuu-.js";const G="Avatar",[te,Te]=P(G),[oe,k]=te(G),ae=t.forwardRef((e,o)=>{const{__scopeAvatar:a,...r}=e,[c,d]=t.useState("idle");return t.createElement(oe,{scope:a,imageLoadingStatus:c,onImageLoadingStatusChange:d},t.createElement(I.span,g({},r,{ref:o})))}),re="AvatarImage",ne=t.forwardRef((e,o)=>{const{__scopeAvatar:a,src:r,onLoadingStatusChange:c=()=>{},...d}=e,$=k(re,a),b=de(r),u=M(n=>{c(n),$.onImageLoadingStatusChange(n)});return D(()=>{b!=="idle"&&u(b)},[b,u]),b==="loaded"?t.createElement(I.img,g({},d,{ref:o,src:r})):null}),ce="AvatarFallback",se=t.forwardRef((e,o)=>{const{__scopeAvatar:a,delayMs:r,...c}=e,d=k(ce,a),[$,b]=t.useState(r===void 0);return t.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>b(!0),r);return()=>window.clearTimeout(u)}},[r]),$&&d.imageLoadingStatus!=="loaded"?t.createElement(I.span,g({},c,{ref:o})):null});function de(e){const[o,a]=t.useState("idle");return D(()=>{if(!e){a("error");return}let r=!0;const c=new window.Image,d=$=>()=>{r&&a($)};return a("loading"),c.onload=d("loaded"),c.onerror=d("error"),c.src=e,()=>{r=!1}},[e]),o}const O=ae,U=ne,K=se,fe=t.forwardRef(({className:e,...o},a)=>T.jsx(O,{ref:a,className:h("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...o}));fe.displayName=O.displayName;const ue=t.forwardRef(({className:e,...o},a)=>T.jsx(U,{ref:a,className:h("aspect-square h-full w-full",e),...o}));ue.displayName=U.displayName;const be=t.forwardRef(({className:e,...o},a)=>T.jsx(K,{ref:a,className:h("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...o}));be.displayName=K.displayName;const R="rovingFocusGroup.onEntryFocus",ie={bubbles:!1,cancelable:!0},L="RovingFocusGroup",[C,j,le]=W(L),[$e,he]=P(L,[le]),[pe,me]=$e(L),ve=t.forwardRef((e,o)=>t.createElement(C.Provider,{scope:e.__scopeRovingFocusGroup},t.createElement(C.Slot,{scope:e.__scopeRovingFocusGroup},t.createElement(ge,g({},e,{ref:o}))))),ge=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:a,orientation:r,loop:c=!1,dir:d,currentTabStopId:$,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:u,onEntryFocus:n,...w}=e,x=t.useRef(null),A=Q(o,x),E=X(d),[f=null,p]=Z({prop:$,defaultProp:b,onChange:u}),[F,i]=t.useState(!1),l=M(n),V=j(a),S=t.useRef(!1),[Y,N]=t.useState(0);return t.useEffect(()=>{const s=x.current;if(s)return s.addEventListener(R,l),()=>s.removeEventListener(R,l)},[l]),t.createElement(pe,{scope:a,orientation:r,dir:E,loop:c,currentTabStopId:f,onItemFocus:t.useCallback(s=>p(s),[p]),onItemShiftTab:t.useCallback(()=>i(!0),[]),onFocusableItemAdd:t.useCallback(()=>N(s=>s+1),[]),onFocusableItemRemove:t.useCallback(()=>N(s=>s-1),[])},t.createElement(I.div,g({tabIndex:F||Y===0?-1:0,"data-orientation":r},w,{ref:A,style:{outline:"none",...e.style},onMouseDown:v(e.onMouseDown,()=>{S.current=!0}),onFocus:v(e.onFocus,s=>{const q=!S.current;if(s.target===s.currentTarget&&q&&!F){const y=new CustomEvent(R,ie);if(s.currentTarget.dispatchEvent(y),!y.defaultPrevented){const _=V().filter(m=>m.focusable),z=_.find(m=>m.active),H=_.find(m=>m.id===f),J=[z,H,..._].filter(Boolean).map(m=>m.ref.current);B(J)}}S.current=!1}),onBlur:v(e.onBlur,()=>i(!1))})))}),Ie="RovingFocusGroupItem",xe=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:a,focusable:r=!0,active:c=!1,tabStopId:d,...$}=e,b=ee(),u=d||b,n=me(Ie,a),w=n.currentTabStopId===u,x=j(a),{onFocusableItemAdd:A,onFocusableItemRemove:E}=n;return t.useEffect(()=>{if(r)return A(),()=>E()},[r,A,E]),t.createElement(C.ItemSlot,{scope:a,id:u,focusable:r,active:c},t.createElement(I.span,g({tabIndex:w?0:-1,"data-orientation":n.orientation},$,{ref:o,onMouseDown:v(e.onMouseDown,f=>{r?n.onItemFocus(u):f.preventDefault()}),onFocus:v(e.onFocus,()=>n.onItemFocus(u)),onKeyDown:v(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){n.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const p=we(f,n.orientation,n.dir);if(p!==void 0){f.preventDefault();let i=x().filter(l=>l.focusable).map(l=>l.ref.current);if(p==="last")i.reverse();else if(p==="prev"||p==="next"){p==="prev"&&i.reverse();const l=i.indexOf(f.currentTarget);i=n.loop?Fe(i,l+1):i.slice(l+1)}setTimeout(()=>B(i))}})})))}),Ae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ee(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function we(e,o,a){const r=Ee(e.key,a);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ae[r]}function B(e){const o=document.activeElement;for(const a of e)if(a===o||(a.focus(),document.activeElement!==o))return}function Fe(e,o){return e.map((a,r)=>e[(o+r)%e.length])}const Le=ve,Ne=xe;export{he as $,fe as A,Le as a,Ne as b,ue as c,be as d};
