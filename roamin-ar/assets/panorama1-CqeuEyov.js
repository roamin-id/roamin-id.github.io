import{r as a,j as n}from"./main-Ctpg_QP-.js";import{V as w,M as f,c as x,A as v,C as y}from"./MarkerContent-19dyk1op.js";const V=()=>{const l=a.useRef(null),o=a.useRef(null),[,C]=a.useState(!1),c="https://photo-sphere-viewer-data.netlify.app/assets/",p=[{id:"marker1",position:{yaw:-.13,pitch:-.08},color:"#00808f",svgPath:"M21.6942 22.9167H20.6612V21.875C20.6612 21.25 20.2479 20.8333 19.6281 20.8333H18.595V10.4167H20.6612L22.7273 6.25C20.6612 6.45833 18.595 6.45833 16.5289 6.25C14.876 5 13.6364 3.75 12.3967 2.08333V1.04167C12.3967 0.416667 11.9835 0 11.3636 0C10.7438 0 10.3306 0.416667 10.3306 1.04167V2.08333C9.09091 3.75 7.85124 5 6.19835 6.25C4.13223 6.45833 2.06612 6.45833 0 6.25L2.06612 10.4167H4.13223V20.8333H3.09917C2.47934 20.8333 2.06612 21.25 2.06612 21.875V22.9167H1.03306C0.413223 22.9167 0 23.3333 0 23.9583V25H22.7273V23.9583C22.7273 23.3333 22.314 22.9167 21.6942 22.9167ZM10.3306 20.8333H6.19835V10.4167H10.3306V20.8333ZM16.5289 20.8333H12.3967V10.4167H16.5289V20.8333Z",tooltip:"Ini gunung?",contentRef:a.useRef(null),contentType:"image",contentData:{imageUrl:"https://backend.roamin.id/uploads/20241118034807-8601658b9e29246a.jpg",description:"Ini adalah gambar gunung."}},{id:"marker2",position:{yaw:.3,pitch:.1},color:"#00808f",svgPath:"M1.73769 12.7126C1.73769 12.7126 1 8.18269 1 7.5C1 4.41587 5.83175 2 12 2C18.1683 2 23 4.41587 23 7.5C23 8.1875 22.2623 12.7126 22.2623 12.7126C20.0369 14.5434 16.2673 15.75 12 15.75C7.73269 15.75 3.96312 14.5434 1.73769 12.7126ZM12 11.625C14.2136 11.6625 16.4141 11.277 18.4831 10.4893C16.5089 9.37211 14.2676 8.81403 12 8.875C9.73243 8.81403 7.49111 9.37211 5.51687 10.4893C7.58594 11.277 9.78637 11.6625 12 11.625ZM19.8588 9.7935C20.1295 9.62763 20.3867 9.44074 20.6281 9.23456C19.6594 7.59556 16.4385 6.125 12 6.125C7.5615 6.125 4.34056 7.59556 3.37188 9.23456C3.61297 9.44112 3.87023 9.62803 4.14119 9.7935C5.87025 8.39787 8.71513 7.5 12 7.5C15.2849 7.5 18.1297 8.39787 19.8588 9.7935ZM12 3.375C6.35219 3.375 2.41212 5.53031 2.37844 7.47456C2.37592 7.68055 2.4174 7.88471 2.50013 8.07338C4.0525 6.10163 7.67494 4.75 12 4.75C16.3251 4.75 19.9475 6.10162 21.5033 8.07269C21.5894 7.88536 21.6311 7.68065 21.625 7.47456C21.5879 5.52963 17.6478 3.375 12 3.375ZM12 17.125C15.5024 17.2153 18.9617 16.3357 21.9956 14.5833L21.625 17.1786C21.5721 19.2996 18.3937 20.634 14.75 21.0809V19.1875C14.75 18.8078 14.4422 18.5 14.0625 18.5H9.9375C9.5578 18.5 9.25 18.8078 9.25 19.1875V21.0809C5.60625 20.634 2.42725 19.2996 2.375 17.1786L2.00513 14.5813C5.0386 16.3342 8.4976 17.2146 12 17.125Z",tooltip:"Ini batu?",contentRef:a.useRef(null),contentType:"text",contentData:{text:"Deskripsi batu yang sangat besar dan kuat."}}],m=`
    <div style="margin-bottom: 10px; width: 22px; height: 22px;">
      <svg viewBox="-2 -2 29 29" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12.5" cy="12.5" r="12.5" fill="gray" />
      <circle cx="12.5" cy="12.5" r="12.5" fill="none" stroke="white" stroke-width="1" />
      <text x="12.5" y="19" font-family="Arial" font-size="18" text-anchor="middle" fill="white">i</text>
      </svg>
    </div>
  `;return a.useEffect(()=>{var r;if(!l.current)return;const e=new w({container:l.current,panorama:c+"sphere.jpg",loadingImg:c+"loader.gif",touchmoveTwoFingers:!0,mousewheelCtrlKey:!0,canvasBackground:"#fff",sphereCorrection:{pan:"0deg"},navbar:["autorotate","zoom","move","download","description",{id:"change",title:"Tooltips",tabbable:!0,visible:!0,content:m,onClick(){const t=o.current;t&&C(i=>(t.getMarkers().forEach(s=>{i?t.hideMarkerTooltip(s.id):t.showMarkerTooltip(s.id)}),!i))}},"markers","markersList","caption","fullscreen"],plugins:[[f,{markers:p.map(t=>{var i;return{id:t.id,position:t.position,html:x(t.color,t.svgPath),size:{width:80,height:80},anchor:"bottom center",zoomLvl:100,tooltip:{content:t.tooltip,position:"top center"},content:(i=t.contentRef.current)==null?void 0:i.innerHTML,data:{compass:"#ff0000"}}})}],[v,{autostartDelay:1e5,autorotatePitch:"5deg"}],[y,{size:"5rem",backgroundSvg:`
              <svg width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="250" fill="gray" /> 
              </svg>
            `}]]});return o.current=e.getPlugin(f),e.addEventListener("click",({data:t})=>{if(!t.rightclick){const i=t.yaw,s=t.pitch;console.log(`Generated pin at: yaw: ${i}, pitch: ${s}`),o.current&&o.current.addMarker({id:"#"+Math.random(),position:{yaw:i,pitch:s},image:c+"pictos/pin-red.png",size:{width:32,height:32},anchor:"bottom center",tooltip:"Generated pin",data:{generated:!0}})}}),(r=o.current)==null||r.addEventListener("select-marker",({marker:t,doubleClick:i,rightClick:s})=>{var g,h,u;if((g=t.data)!=null&&g.generated){if(i){const d={id:t.id};(h=o.current)==null||h.removeMarker(d),console.log(`Removed pin with id: ${t.id}`)}else if(s){const d={id:t.id,image:c+"pictos/pin-blue.png"};(u=o.current)==null||u.updateMarker(d),console.log(`Updated pin with id: ${t.id} to blue`)}}}),()=>{e&&e.destroy()}},[]),n.jsx("div",{className:"h-screen",children:n.jsx("div",{ref:l,style:{height:"100%",width:"100%"},children:p.map((e,r)=>n.jsx("div",{id:`${e.id}-content`,ref:e.contentRef,style:{display:"none"},children:e.contentType==="image"?n.jsxs(n.Fragment,{children:[n.jsxs("b",{style:{fontSize:"30px"},children:["Gambar Marker ",r+1]}),n.jsx("img",{src:e.contentData.imageUrl,alt:`Marker ${r+1}`,style:{width:"300px",height:"auto"}}),n.jsx("p",{children:e.contentData.description})]}):e.contentType==="text"?n.jsxs(n.Fragment,{children:[n.jsxs("b",{style:{fontSize:"30px"},children:["Deskripsi Marker ",r+1]}),n.jsx("p",{children:e.contentData.text})]}):n.jsx("div",{dangerouslySetInnerHTML:{__html:e.contentData.text||""}})},r))})})};export{V as default};
